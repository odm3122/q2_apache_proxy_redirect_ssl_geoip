<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>readme.md</title>
  </head>
  <body>
    <o:smarttagtype
      namespaceuri="urn:schemas-microsoft-com:office:smarttags"
      name="place"><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Normal</w:View>
  <w:Zoom>0</w:Zoom>
  <w:HyphenationZone>21</w:HyphenationZone>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
      <style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:24.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h4
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:4;
	font-size:12.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{mso-style-update:auto;
	mso-style-noshow:yes;
	mso-style-next:Standard;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
p
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";}
code
	{font-family:"Courier New";
	mso-ascii-font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:"Courier New";
	mso-bidi-font-family:"Courier New";}
pre
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";}
@page Section1
	{size:595.3pt 841.9pt;
	margin:70.85pt 70.85pt 2.0cm 70.85pt;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:1030258028;
	mso-list-template-ids:-1256028538;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l0:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l1
	{mso-list-id:2141261045;
	mso-list-template-ids:-1849767976;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Normale Tabelle";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";}
</style>
<![endif]-->
      <h1><span style="font-family:
Calibri;font-size:12pt;color:rgb(0,0,0);font-style:normal;font-variant:normal;">Q2.
          Setup a web server. It can response on http on port 80 and
          will forward all http request<span style="font-family:
            ;font-size:12pt;color:rgb(0,0,0);font-style:normal;font-variant:normal;">
            to https (port 443). For example: GET
            http://server.fqdn/site/ will redirect to<span
              style="font-family:
              ;font-size:12pt;color:rgb(0,0,0);font-style:normal;font-variant:normal;">
              https://server.fqdn/site/<span style="font-family:
                ;font-size:12pt;color:rgb(0,0,0);font-style:normal;font-variant:normal;">
                On this web server, it should response according to
                user’s GEOIP location. For example from<span
                  style="font-family:
                  ;font-size:12pt;color:rgb(0,0,0);font-style:normal;font-variant:normal;">
                  Switzerland, it should response ”Welcome, user from
                  Switzerland, your IP is X.Y.Z.0”<span
                    style="font-family:
                    ;font-size:12pt;color:rgb(0,0,0);font-style:normal;font-variant:normal;">
                    Please provide simple installation guide,
                    configuration and source code to the site</span></span></span></span></span></span></h1>
      <p><br>
        Answer:</p>
    </o:smarttagtype><o:smarttagtype
      namespaceuri="urn:schemas-microsoft-com:office:smarttags"
      name="place">
      <h1><a name="_Toc451941904"><span style="font-family:Arial;
            mso-ansi-language:EN-GB" lang="EN-GB"></span></a></h1>
    </o:smarttagtype><i style="mso-bidi-font-style:normal"><span
        style="font-size:
9.0pt;font-family:Arial;mso-ansi-language:EN-GB;font-weight:normal;mso-bidi-font-weight:
        bold" lang="EN-GB"><o:p></o:p></span></i><o:smarttagtype
      namespaceuri="urn:schemas-microsoft-com:office:smarttags"
      name="place">
      <h1><a name="_Toc451941904"><span style="font-family:Arial;
            mso-ansi-language:EN-GB" lang="EN-GB">Q2 Apache HTTP Server
            Proxy redirect http to https and
            redirect based on geoip</span></a><span
          style="font-family:Arial;
          mso-ansi-language:EN-GB" lang="EN-GB"> - Prototype<o:p></o:p></span></h1>
      <p class="MsoToc1" style="tab-stops:right dotted 453.1pt"><!--[if supportFields]><span
lang=EN-GB style='font-family:Arial;mso-ansi-language:EN-GB'><span
style='mso-element:field-begin'></span><span
style='mso-spacerun:yes'> </span>TOC \o &quot;1-3&quot; \h \z \u <span
style='mso-element:field-separator'></span></span><![endif]--><span
          class="MsoHyperlink"><span style="mso-no-proof:yes"><a
              href="#_Toc451941904"><span
                style="font-family:Arial;mso-ansi-language:EN-GB"
                lang="EN-GB">Q2 Apache HTTP
                Server Proxy redirect http to https and redirect based
                on geoip</span><span
style="color:windowtext;display:none;mso-hide:screen;text-decoration:none;text-underline:none"><span
                  style="mso-tab-count:1 dotted">. </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc451941904 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style="color:windowtext;display:none;mso-hide:screen;text-decoration:none;text-underline:none">1</span><span
                style="color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none"><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400350031003900340031003900300034000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
          style="mso-no-proof:yes"><o:p></o:p></span></p>
      <p class="MsoToc1" style="tab-stops:right dotted 453.1pt"><span
          class="MsoHyperlink"><span style="mso-no-proof:yes"><a
              href="#_Toc451941905"><span style="font-family:Arial">Introduction</span><span
                style="color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none"><span
                  style="mso-tab-count:1 dotted">. </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc451941905 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style="color:windowtext;display:none;mso-hide:screen;text-decoration:none;text-underline:none">1</span><span
                style="color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none"><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400350031003900340031003900300035000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
          style="mso-no-proof:yes"><o:p></o:p></span></p>
      <p class="MsoToc1" style="tab-stops:right dotted 453.1pt"><span
          class="MsoHyperlink"><span style="mso-no-proof:yes"><a
              href="#_Toc451941906"><span
                style="font-family:Arial;mso-ansi-language:EN-GB"
                lang="EN-GB">Step 1: Install
                Apache2 and Disable any existing site</span><span
                style="color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none"><span
                  style="mso-tab-count:1 dotted">. </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc451941906 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style="color:windowtext;display:none;mso-hide:screen;text-decoration:none;text-underline:none">1</span><span
                style="color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none"><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400350031003900340031003900300036000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
          style="mso-no-proof:yes"><o:p></o:p></span></p>
      <p class="MsoToc1" style="tab-stops:right dotted 453.1pt"><span
          class="MsoHyperlink"><span style="mso-no-proof:yes"><a
              href="#_Toc451941907"><span
                style="font-family:Arial;mso-ansi-language:EN-GB"
                lang="EN-GB">Step 2:
                Configure&nbsp;http://odm3122.selfhost.de:80/</span><span
                style="color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none"><span
                  style="mso-tab-count:1 dotted"> </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc451941907 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style="color:windowtext;display:none;mso-hide:screen;text-decoration:none;text-underline:none">2</span><span
                style="color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none"><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400350031003900340031003900300037000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
          style="mso-no-proof:yes"><o:p></o:p></span></p>
      <p class="MsoToc1" style="tab-stops:right dotted 453.1pt"><span
          class="MsoHyperlink"><span style="mso-no-proof:yes"><a
              href="#_Toc451941908"><span style="font-family:Arial">Step
                3: Enable SSL</span><span style="color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none"><span
                  style="mso-tab-count:1 dotted">. </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc451941908 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style="color:windowtext;display:none;mso-hide:screen;text-decoration:none;text-underline:none">2</span><span
                style="color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none"><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400350031003900340031003900300038000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
          style="mso-no-proof:yes"><o:p></o:p></span></p>
      <p class="MsoToc1" style="tab-stops:right dotted 453.1pt"><span
          class="MsoHyperlink"><span style="mso-no-proof:yes"><a
              href="#_Toc451941909"><span
                style="font-family:Arial;mso-ansi-language:EN-GB"
                lang="EN-GB">Step 4:
                Configure&nbsp;https://odm3122.selfhost.de:443/</span><span
                style="color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none"><span
                  style="mso-tab-count:1 dotted"> </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc451941909 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style="color:windowtext;display:none;mso-hide:screen;text-decoration:none;text-underline:none">5</span><span
                style="color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none"><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400350031003900340031003900300039000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
          style="mso-no-proof:yes"><o:p></o:p></span></p>
      <p class="MsoToc1" style="tab-stops:right dotted 453.1pt"><span
          class="MsoHyperlink"><span style="mso-no-proof:yes"><a
              href="#_Toc451941910"><span
                style="font-family:Arial;mso-ansi-language:EN-GB"
                lang="EN-GB">Step 4: Enable
                Virtual Hosts</span><span
                style="color:windowtext;display:none;mso-hide:screen;
                text-decoration:none;text-underline:none"><span
                  style="mso-tab-count:1 dotted">. </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc451941910 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style="color:windowtext;display:none;mso-hide:screen;text-decoration:none;text-underline:none">7</span><span
                style="color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none"><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400350031003900340031003900310030000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
          style="mso-no-proof:yes"><o:p></o:p></span></p>
      <p class="MsoToc1" style="tab-stops:right dotted 453.1pt"><span
          class="MsoHyperlink"><span style="mso-no-proof:yes"><a
              href="#_Toc451941911"><span
                style="font-family:Arial;mso-ansi-language:EN-GB"
                lang="EN-GB">Step 5: Activate
                new Configuration</span><span
                style="color:windowtext;display:none;mso-hide:
                screen;text-decoration:none;text-underline:none"><span
                  style="mso-tab-count:
                  1 dotted">. </span></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-begin'></span></span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'> PAGEREF
_Toc451941911 \h </span><span style='color:windowtext;display:none;mso-hide:
screen;text-decoration:none;text-underline:none'><span style='mso-element:field-separator'></span></span><![endif]--><span
style="color:windowtext;display:none;mso-hide:screen;text-decoration:none;
                text-underline:none">8</span><span
                style="color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none"><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003400350031003900340031003900310031000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
          style="mso-no-proof:yes"><o:p></o:p></span></p>
      <h1><!--[if supportFields]><span lang=EN-GB style='font-family:Arial;
mso-ansi-language:EN-GB'><span style='mso-element:field-end'></span></span><![endif]--><span
          style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></h1>
      <h1><a name="_Toc451941905"><span style="font-family:Arial">Introduction</span></a><span
          style="font-family:Arial"><o:p></o:p></span></h1>
      <p><span style="mso-ansi-language:EN-GB" lang="EN-GB">The HTTP
          Server on the
          Management Server has the following responsibilities<o:p></o:p></span></p>
      <ul type="disc">
        <li class="MsoNormal"
          style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
          mso-list:l0 level1 lfo2;tab-stops:list 36.0pt"><span
            style="font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB"
            lang="EN-GB">Entry point to the odm3122.selfhost.de/site/ </span><span
            style="font-family:Arial;mso-ansi-language:EN-GB"
            lang="EN-GB"><o:p></o:p></span></li>
        <li class="MsoNormal"
          style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
          mso-list:l0 level1 lfo2;tab-stops:list 36.0pt"><span
            style="mso-ansi-language:EN-GB" lang="EN-GB">Any Request
            that does not belong to </span><span
            style="font-size:10.0pt;font-family:Arial;mso-ansi-language:
            EN-GB" lang="EN-GB">duuig.local/site/ </span><span
            style="mso-ansi-language: EN-GB" lang="EN-GB">must be
            forwarded to the secure ssl connection<o:p></o:p></span></li>
      </ul>
      <p class="MsoNormal"
        style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto"><span
          style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></p>
      <h4><span style="font-family:Arial;mso-ansi-language:EN-GB"
          lang="EN-GB">Virtual
          Hosts<o:p></o:p></span></h4>
      <p><span style="mso-ansi-language:EN-GB" lang="EN-GB">The term
          Virtual Host
          refers to the practice of running more than one web site on a
          single machine. </span>We
        use the Virtual Hosts to serve multiple ports:</p>
      <ul type="disc">
        <li class="MsoNormal"
          style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
          mso-list:l1 level1 lfo1;tab-stops:list 36.0pt"><span
            style="font-size:10.0pt;font-family:Arial;mso-ansi-language:EN-GB"
            lang="EN-GB">http://puppetagent1.duuig.local:80/<o:p></o:p></span></li>
        <li class="MsoNormal"
          style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
          mso-list:l1 level1 lfo1;tab-stops:list 36.0pt"><span
            style="mso-ansi-language:EN-GB" lang="EN-GB">https://puppetagent1.duuig.local:443&nbsp;</span><span
            style="font-size:10.0pt;font-family:Arial;mso-ansi-language:
            EN-GB" lang="EN-GB"><o:p></o:p></span></li>
      </ul>
      <h4><span style="font-family:Arial;mso-ansi-language:EN-GB"
          lang="EN-GB">Base
          Image<o:p></o:p></span></h4>
      <p class="MsoNormal"><span style="mso-ansi-language:EN-GB"
          lang="EN-GB">Ubuntu
          Server 16.4 with Malignance Tools Software Package<o:p></o:p></span></p>
      <h1><a name="_Toc451941906"><span style="font-family:Arial;
            mso-ansi-language:EN-GB" lang="EN-GB">Step 1: Install
            Apache2 and Disable any existing site</span></a><span
          style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB"><o:p></o:p></span></h1>
      <h4><span style="font-family:Arial;mso-ansi-language:EN-GB"
          lang="EN-GB">Install
          Apache<o:p></o:p></span></h4>
      <pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo apt-get install apache2<o:p></o:p></span></pre>
      <pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></pre>
      <pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">Activate the Modules:<o:p></o:p></span></pre>
      <pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></pre>
      <pre><code><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo a2enmod proxy_http<o:p></o:p></span></code></pre>
      <pre><code><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo a2enmod rewrite</span></code><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p></o:p></span></pre>
      <h4><span style="mso-ansi-language:EN-GB" lang="EN-GB">Disable all
          apache sites<o:p></o:p></span></h4>
      <pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"># sudo a2dissite *&nbsp;<o:p></o:p></span></pre>
      <p><span style="mso-ansi-language:EN-GB" lang="EN-GB">Do not
          activate the new
          configuration yet.<o:p></o:p></span></p>
      <h1><a name="_Toc451941907"><span style="font-family:Arial;
            mso-ansi-language:EN-GB" lang="EN-GB">Step 2:
            Configure&nbsp;http://odm3122.selfhost.de:80/</span></a><span
          style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB"><o:p></o:p></span></h1>
      <p><span style="font-size:10.0pt;mso-ansi-language:EN-GB"
          lang="EN-GB">This
          Virtual Host redirects every request to the
          Odm3122.selfhost.de Website
          at&nbsp;http://www.odm3122.selfhost.de/.</span><span
          style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p></o:p></span></p>
      <p class="MsoNormal"><b><span
            style="font-family:Arial;mso-ansi-language:
            FR" lang="FR">/etc/apache2/sites-available/odm3122.conf</span></b></p>
      <p class="MsoNormal"><br>
        <b><span style="font-family:Arial;mso-ansi-language:
            FR" lang="FR"></span></b><span
          style="font-family:Arial;mso-ansi-language:FR" lang="FR"><o:p></o:p></span></p>
      <pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">https://github.com/odm3122/q2_apache_proxy_redirect_ssl_geoip/blob/master/odm3122.conf<br><br><br><o:p></o:p></span></pre>

<pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><span style="mso-spacerun:yes">&nbsp;&nbsp;</span></span>	ProxyRequests Off<span style="mso-ansi-language:EN-GB" lang="EN-GB"> -&gt;  disables forward proxy requests.<br><br><o:p></o:p></span></pre>

<pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">	R=301 </span><span style="mso-ansi-language:EN-GB" lang="EN-GB"> does a permanent (</span><a href="http://en.wikipedia.org/wiki/HTTP_301"><span style="mso-ansi-language:
EN-GB" lang="EN-GB">HTTP 301</span></a><span style="mso-ansi-language:EN-GB" lang="EN-GB">) redirect of any request to&nbsp;http://www.odm3122.selfhost.de./&nbsp;preserving the uri.<o:p></o:p></span></pre>

<h1><a name="_Toc451941908"><span style="font-family:Arial">Step 3: Enable SSL</span></a><span style="font-family:Arial"> <o:p></o:p></span></h1>

<h4><span style="font-family:Arial">Enable ssl mod<o:p></o:p></span></h4>

<pre><code>sudo a2enmod ssl<o:p></o:p></code></pre><pre><code><o:p>&nbsp;</o:p></code></pre><pre><code><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo service apache2 restart<o:p></o:p></span></code></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></pre>

<h4><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB">Enable
port 443<o:p></o:p></span></h4>

<p><span style="mso-ansi-language:EN-GB" lang="EN-GB">Just add or check one
single line (line 16) to&nbsp;</span><code><span style="font-size:
10.0pt;mso-ansi-language:EN-GB" lang="EN-GB">ports.conf</span></code><span style="mso-ansi-language:EN-GB" lang="EN-GB">.<o:p></o:p></span></p>

<p class="MsoNormal"><b><span style="font-family:Arial;mso-ansi-language:
FR" lang="FR">/etc/apache2/ports.conf</span></b><span style="font-family:Arial;
mso-ansi-language:FR" lang="FR"><o:p></o:p></span></p>

<pre><span style="mso-ansi-language:FR" lang="FR">Listen 443<o:p></o:p></span></pre>

<p><span style="mso-ansi-language:EN-GB" lang="EN-GB">The full file should look
as follows<o:p></o:p></span></p>

<p class="MsoNormal"><b><span style="font-family:Arial;mso-ansi-language:
EN-GB" lang="EN-GB">/etc/apache2/ports.conf</span></b><span style="font-family:
Arial;mso-ansi-language:EN-GB" lang="EN-GB"><o:p></o:p></span></p>

<pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"># If you just change the port or add more ports here, you will likely also<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"># have to change the VirtualHost statement in<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"># /etc/apache2/sites-enabled/000-default<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"># This is also true if you have upgraded from before 2.2.9-3 (i.e. from<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"># Debian etch). See /usr/share/doc/apache2.2-common/NEWS.Debian.gz and<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"># README.Debian.gz<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">NameVirtualHost *:80<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">Listen 80<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">&lt;IfModule mod_ssl.c&gt;<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span># If you add NameVirtualHost *:443 here, you will also have to change<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span></span># the VirtualHost statement in /etc/apache2/sites-available/default-ssl</pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span># to &lt;VirtualHost *:443&gt;<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span># Server Name Indication for SSL named virtual hosts is currently not<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span># supported by MSIE on Windows XP.<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>NameVirtualHost *:443<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>Listen 443<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">&lt;/IfModule&gt;<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">&lt;IfModule mod_gnutls.c&gt;<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp; </span>Listen 443<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">&lt;/IfModule&gt;<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></pre>

<h4><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB">Generate
Self signet Certs (Only Test Env)<o:p></o:p></span></h4>

<pre><code><span style="mso-ansi-language:FR" lang="FR">sudo mkdir /etc/apache2/ssl.cert<o:p></o:p></span></code></pre><pre><code><span style="mso-ansi-language:FR" lang="FR"><o:p>&nbsp;</o:p></span></code></pre><pre><code><span style="mso-ansi-language:FR" lang="FR">sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/apache2/ssl.cert/</span></code><span style="mso-ansi-language:FR" lang="FR">odm3122selfhost<code>.key -out /etc/apache2/ssl.cert/</code>odm3122selfhost<code>.crt</code><o:p></o:p></span></pre><pre><span style="mso-ansi-language:FR" lang="FR"><o:p>&nbsp;</o:p></span></pre>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto"><span style="mso-ansi-language:EN-GB" lang="EN-GB">When you hit "ENTER", you
will be asked a number of questions.<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto"><span style="mso-ansi-language:EN-GB" lang="EN-GB">The most important item that is
requested is the line that reads "Common Name (e.g. server FQDN or YOUR
name)". You should enter the domain name you want to associate with the
certificate, or the server's public IP address if you do not have a domain
name.<o:p></o:p></span></p>

<p class="MsoNormal" style="mso-margin-top-alt:auto;mso-margin-bottom-alt:auto"><b style="mso-bidi-font-weight:normal"><span style="mso-ansi-language:
EN-GB" lang="EN-GB">In our case the Common Name is: </span></b><b style="mso-bidi-font-weight:
normal"><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB">odm3122.selfhost.de</span></b><b style="mso-bidi-font-weight:normal"><span style="mso-ansi-language:
EN-GB" lang="EN-GB"><o:p></o:p></span></b></p>

<h4><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB">Install
Mod geoip<o:p></o:p></span></h4>

<pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo apt-get install libapache2-mod-geoip <o:p></o:p></span></pre>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><b style="mso-bidi-font-weight:normal"><span style="mso-ansi-language:EN-GB" lang="EN-GB">Load Database<o:p></o:p></span></b></p>

<pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">cd /usr/share/GeoIP<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo wget geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz<o:p></o:p></span></pre><pre>sudo gunzip GeoLiteCity.dat.gz</pre><pre><o:p>&nbsp;</o:p></pre>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB">Enable
module geoip:<o:p></o:p></span></p>

<pre><code><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo a2enmod </span>geoip</code><o:p></o:p></pre>

<h4><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></h4>

<p><b style="mso-bidi-font-weight:normal"><span style="mso-ansi-language:
EN-GB" lang="EN-GB">geoip Testscript:<o:p></o:p></span></b></p>

<p><b style="mso-bidi-font-weight:normal"><span style="mso-ansi-language:
EN-GB" lang="EN-GB">to test with the php site you need php<o:p></o:p></span></b></p>

<pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo apt-get update <o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo apt-get install <code>php7.0<o:p></o:p></code></span></pre><pre><code><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo apt-get install libapache2-mod-php7.0</span></code><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p></o:p></span></pre><pre><code>sudo a2enmod php7.0<o:p></o:p></code></pre><pre><code><o:p>&nbsp;</o:p></code></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">sudo service apache2 restart<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></pre>

<h4><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB">/var/www/html/phptest.php<o:p></o:p></span></h4>

<h4><i style="mso-bidi-font-style:normal"><span style="font-size:
9.0pt;font-family:Arial;mso-ansi-language:EN-GB;font-weight:normal;mso-bidi-font-weight:
bold" lang="EN-GB">&lt;?php phpinfo(); ?&gt;<o:p></o:p></span></i></h4>

<pre><code>now you should see the php info page<o:p></o:p></code></pre>

<h4><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB">/var/www/html/geoip.php<o:p></o:p></span></h4>

<p><b style="mso-bidi-font-weight:normal"><span style="mso-ansi-language:
EN-GB" lang="EN-GB">Hint: You need a Free Proxy in </span></b><st1:country-region><st1:place><b style="mso-bidi-font-weight:normal"><span style="mso-ansi-language:
  EN-GB" lang="EN-GB">France</span></b></st1:place></st1:country-region><b style="mso-bidi-font-weight:
normal"><span style="mso-ansi-language:EN-GB" lang="EN-GB"> and another
Country<span style="mso-spacerun:yes">&nbsp; </span>to test <span style="mso-spacerun:yes">&nbsp;</span>it<o:p></o:p></span></b></p>

<p><span style="mso-ansi-language:EN-GB" lang="EN-GB">Check a Proxylist for the
IP and Port of a open proxy: http://gatherproxy.com/proxylist/country/?c=France<o:p></o:p></span></p>

<p><b style="mso-bidi-font-weight:normal"><span style="mso-ansi-language:
EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></b></p>

<h1><a name="_Toc451941909"><span style="font-family:Arial;
mso-ansi-language:EN-GB" lang="EN-GB">Step 4: Configure&nbsp;https://odm3122.selfhost.de:443/</span></a><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB"><o:p></o:p></span></h1>

<p><span style="mso-ansi-language:EN-GB" lang="EN-GB">This Virtual Host is
responsible to proxy valid requests either to a Odm3122.selfhost.de Instance or
to OMD. Everything else is redirected to the Odm3122.selfhost.de Website at&nbsp;http://www.odm3122.selfhost.de/.<o:p></o:p></span></p>

<table class="MsoNormalTable" style="mso-cellspacing:1.5pt;
 background:#D8E4F1;border:solid #6699CC 1.0pt;mso-border-alt:solid #6699CC .75pt" border="1" cellpadding="0">
 <tbody><tr style="mso-yfti-irow:0;mso-yfti-lastrow:yes">
  <td style="border:none;padding:.75pt .75pt .75pt .75pt">
  <p><span style="mso-ansi-language:EN-GB" lang="EN-GB">The Odm3122.selfhost.de
  certificates are stored in the IT KeePass<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table>

<p class="MsoNormal"><b><span style="font-family:Arial;mso-ansi-language:
EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></b></p>

<p class="MsoNormal"><b><span style="font-family:Arial;mso-ansi-language:
FR" lang="FR">/etc/apache2/site-available/odm3122-ssl.conf<br><br></span></b></p>

</o:smarttagtype><o:smarttagtype namespaceuri="urn:schemas-microsoft-com:office:smarttags" name="place"><a><a href="https://github.com/odm3122/q2_apache_proxy_redirect_ssl_geoip/blob/master/odm3122-ssl.conf">https://github.com/odm3122/q2_apache_proxy_redirect_ssl_geoip/blob/master/odm3122-ssl.conf</a></a><br><p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB" lang="EN-GB"></span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB" lang="EN-GB"></span><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;mso-ansi-language:
FR" lang="FR"><o:p></o:p></span></p>

<h1><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB">Step 5
Create HTML Files and parent folders<o:p></o:p></span></h1>

<p class="MsoNormal"><b style="mso-bidi-font-weight:normal"><span style="mso-ansi-language:EN-GB" lang="EN-GB">/var/www/html/en/index.html<o:p></o:p></span></b></p>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB">&lt;!DOCTYPE
html PUBLIC "-//IETF//DTD HTML 2.0//EN"&gt;<br>
&lt;HTML&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;HEAD&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;TITLE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello International Guest<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/TITLE&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;H1&gt;Hi&lt;/H1&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;P&gt;This is the International Site.&lt;/P&gt; <br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<o:p></o:p></span></p>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><b style="mso-bidi-font-weight:normal"><span style="mso-ansi-language:EN-GB" lang="EN-GB">/var/www/html/fr/index.html<o:p></o:p></span></b></p>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB">&lt;!DOCTYPE
html PUBLIC "-//IETF//DTD HTML 2.0//EN"&gt;<br>
&lt;HTML&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;HEAD&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;TITLE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello </span><st1:country-region><st1:place><span style="mso-ansi-language:EN-GB" lang="EN-GB">France</span></st1:place></st1:country-region><span style="mso-ansi-language:EN-GB" lang="EN-GB"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/TITLE&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;H1&gt;Hi&lt;/H1&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;P&gt;This is the France Site.&lt;/P&gt; <br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<o:p></o:p></span></p>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></p>

<h1><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></h1>

<p class="MsoNormal"><b style="mso-bidi-font-weight:normal">/var/www/html/fr/index.html<o:p></o:p></b></p>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB">&lt;!DOCTYPE
html PUBLIC "-//IETF//DTD HTML 2.0//EN"&gt;<br>
&lt;HTML&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;HEAD&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;TITLE&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello </span><st1:country-region><st1:place><span style="mso-ansi-language:EN-GB" lang="EN-GB">Switzerland</span></st1:place></st1:country-region><span style="mso-ansi-language:EN-GB" lang="EN-GB"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/TITLE&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;H1&gt;Hi&lt;/H1&gt;<br>
&nbsp;&nbsp;&nbsp;&lt;P&gt;This is the Swiss Site.&lt;/P&gt; <br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<o:p></o:p></span></p>

<p><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;;
mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></p>

<h1><a name="_Toc451941910"><span style="font-family:Arial;
mso-ansi-language:EN-GB" lang="EN-GB">Step 6: Enable Virtual Hosts</span></a><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB"><o:p></o:p></span></h1>

<pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"># sudo a2ensite duuig duuig-ssl<o:p></o:p></span></pre>

<p><span style="mso-ansi-language:EN-GB" lang="EN-GB">Do not activate the new
configuration yet.<o:p></o:p></span></p>

<h1><a name="_Toc451941911"><span style="font-family:Arial;
mso-ansi-language:EN-GB" lang="EN-GB">Step 7: Activate new Configuration</span></a><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB"><o:p></o:p></span></h1>

<p><span style="mso-ansi-language:EN-GB" lang="EN-GB">First, we check that the
configuration is valid.<o:p></o:p></span></p>

<pre><span style="mso-ansi-language:EN-GB" lang="EN-GB"># sudo apachectl configtest<o:p></o:p></span></pre><pre><span style="mso-ansi-language:EN-GB" lang="EN-GB">Syntax OK<o:p></o:p></span></pre>

<p><span style="mso-ansi-language:EN-GB" lang="EN-GB">If the configuration is
valid we can reload it<o:p></o:p></span></p>

<pre># service apache2 reload</pre><pre><o:p>&nbsp;</o:p></pre><pre><o:p>&nbsp;</o:p></pre>

<h1><span style="font-family:Arial;mso-ansi-language:EN-GB" lang="EN-GB">Summary<o:p></o:p></span></h1>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB">This is a
manual configuration of a Apache Proxy that redirect User based on there GeoIP.<o:p></o:p></span></p>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB">There is
also a Puppet Module für the Installation of Mod GeoIP<span style="mso-spacerun:yes">&nbsp; </span>but i didn't found out in a short time as
this module is only blocking or also redirect. Class: </span><code><span style="font-size:10.0pt;mso-ansi-language:EN-GB" lang="EN-GB">apache::mod::geoip</span></code><code><span style="mso-ansi-font-size:12.0pt;mso-bidi-font-size:12.0pt;
font-family:&quot;Times New Roman&quot;;mso-ansi-language:EN-GB" lang="EN-GB"><o:p></o:p></span></code></p>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></p>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></p>

<p><span style="mso-ansi-language:EN-GB" lang="EN-GB">&nbsp;<o:p></o:p></span></p>

<p><span style="mso-ansi-language:EN-GB" lang="EN-GB">&nbsp;<o:p></o:p></span></p>

<p class="MsoNormal"><span style="mso-ansi-language:EN-GB" lang="EN-GB"><o:p>&nbsp;</o:p></span></p>

</o:smarttagtype></body></html>